<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="stylesheet" href="estilo.css">
  <meta charset="utf-8">
  <title>PRINCIPAL</title>
  <script>
    window.$ = window.jQuery = require('./jquery-3.2.1.js');
  </script>

  <!-- Stylesheets 
    <link rel="stylesheet" href="css/photon.css">
-->
  <!-- Electron Javascript -->
  <!-- <script src="app.js" charset="utf-8"></script> -->
</head>

<body>
  <form id="form" method="POST">
    <p>Nome <br><input name="nome" type="text" id="nome"></p>
    <p>Empresa<br>
    <input name="empresa" type="text" id="empresa"></p>
    <p>RG<br>
    <input name="rg" type="text" id="rg"></p>
    <p>Data<br>
    <input name="data" type="date" id="data"></p>
    <br/>
    <input type="button" value="Teste de conexão" id="btn" onclick="teste();" />
  </form>
  <div class="form-group">
    <table class="tabela">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Empresa</th>
          <th>RG</th>
          <th>Data</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>aaa</td>
          <td>aaa</td>
          <td>aaa</td>
          <td>aaa</td>
        </tr>
      </tbody>
    </table>
  </div>
</body>
<script>
  //chama o mysql
  let mysql = require("mysql");

  window.Vue =require('vue');

  //variavél que recebe a função de criar a base de dados
  let conectar = mysql.createConnection({
    host: "localhost",
    user: "root",
    password: "q1w2e3r4",
    database: "portaria"
  });
  //função que conecta
  conectar.connect((err) => {
    if (err) {
      return console.log(err.stack);
    }
    console.log("CONECTADO COM SUCESSO AO MYSQL");
  });
  //variavel que seleciona o elemento
  /*
  $query = 'SELECT * FROM `cadastro`';
  //função que chama o elemento do banco de dados e mostra no html
  conectar.query($query, (err, rows, fields) => {
    if(err) throw err;
    $('.b').text(rows[0].id);
  });
  */

//inserindo dados com sucesso
function teste(){

 var info = {
   nome:$("#nome").val(),
   empresa:$("#empresa").val(),
   rg:$("#rg").val(),
   data:$("#data").val()
 };

var query = conectar.query('insert into cadastro set ?', info, function(err, result){
      if(err){
        console.log(err);
      }else{
        console.log("secesso");
      }
      console.log(query.sql);
 });
conectar.end();
 }

   


    



</script>

</html>