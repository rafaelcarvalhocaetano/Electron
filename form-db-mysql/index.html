<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="stylesheet" href="estilo.css">
  <meta charset="utf-8">
  <title>PRINCIPAL</title>
  <script>
    window.$ = window.jQuery = require('./jquery-3.2.1.js');
  </script>

  <!-- Stylesheets 
    <link rel="stylesheet" href="css/photon.css">
-->
  <!-- Electron Javascript -->
  <!-- <script src="app.js" charset="utf-8"></script> -->
</head>

<body>
  <form id="form" method="POST">
    <p>Nome <br>
      <input name="nome" type="text">
    </p>
    <p>Empresa<br>
      <input name="empresa" type="text"></p>
    <p>RG<br>
      <input name="rg" type="text"></p>
    <p>Data<br>
      <input name="data"  type="date"></p>
    <br/>
    <input type="button" value="Teste de conexão" />
  </form>

  <div class="form-group">
    <table class="tabela">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nome</th>
          <th>Empresa</th>
          <th>RG</th>
          <th>Data</th>
        </tr>
      </thead>
      <tbody>

        <tr v-for="lista in listas">
          <td>{{lista.id}}</td>
          <td>{{lista.nome}}</td>
          <td>{{lista.empresa}}</td>
          <td>{{lista.rg}}</td>
          <td>{{lista.data}}</td>
        </tr>

      </tbody>
    </table>
  </div>
  
</body>
<script>
  window.Vue = require('vue');
  let mysql = require('mysql');

  let conectar = mysql.createConnection({
    host: "localhost",
    user: "root",
    password: "q1w2e3r4",
    database: "portaria"
  });
  
 
  new Vue({
    el: 'body',
    data: {
      listas: []
    },
    ready: function () { //função responsável por exibir as infos
      
      conectar.connect((err) => {
        if (err) {
          throw err;
          console.log("Erro ao conectar");
        }
        console.log("CONECTADO COM SUCESSO AO MYSQL");
      });
      let b = conectar.query("SELECT * FROM cadastro", function (err, res) {
        if (error) {
          throw error;
        }
        console.log(res);
        let r = res[0]
        $('.b').append('<h3>'+r.nome+'</h3>');
             
      });
     
      
      
     
    }
  })

</script>
<script>
  //chama o mysql
  //let mysql = require("mysql");



  //variavél que recebe a função de criar a base de dados

  //variavel que seleciona o elemento
  /*
    $query = 'SELECT * FROM `cadastro`';
  //função que chama o elemento do banco de dados e mostra no html
  conectar.query($query, (err, rows) => {
    if(err){
      throw err;
    }
    

    for (i = 0; i < rows.length; i++) { 
        $dados = rows[i];
    } 
    
  });
  */

/*
//inserindo dados com sucesso
function enviar(){

 var info = {
   nome:$("#nome").val(),
   empresa:$("#empresa").val(),
   rg:$("#rg").val(),
   data:$("#data").val()
 };

var query = conectar.query('insert into cadastro set ?', info, function(err, result){
      if(err){
        console.log(err);
      }else{
        console.log("secesso");
      }
      console.log(query.sql);
 });
conectar.end();
}

  let clientes = inserir;

  new Vue({
    el: 'body', //recebe o conteúdo do body
      data: {
         clientes:[],
         mode:'',
         client:{
           nome:'',
           cpf:'',
           telefone:''
         }
})
*/

</script>

</html>